<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-face-aframe.prod.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
</head>
<body class="bg-gray-900 flex items-center justify-center h-screen w-screen m-0 overflow-hidden">
    <a-scene mindar-face embedded vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false" loading-screen="enabled: true">
        <a-camera active="false" position="0 0 0" look-controls="enabled: true"></a-camera>
        <a-entity mindar-face-target="anchorIndex: 1">
            <!--
            <a-gltf-model id="model" src="assets/3d/hulk/scene.gltf" scale="6.1 6.1 6" position="0 -1.1 -0.3"></a-gltf-model>
            -->
            <a-gltf-model id="model" src="assets/3d/la_casa/scene.gltf" scale="0.7 0.7 0.6" position="0 -0.7 -0.3" rotation="95 0 0"></a-gltf-model>
        </a-entity>
    </a-scene>

    <div class="fixed top-5 left-5">
        <!-- Filters Main Button (Hover to Show Options) -->
        <div class="relative group">
            <div class="flex justify-center items-center bg-gray-300 w-20 h-20 rounded-full cursor-pointer shadow-md transform transition-all hover:bg-gray-400 hover:scale-110 active:scale-95">
                <img src="assets/images/filters.png" alt="Filters" class="w-10 h-10 object-cover rounded-full">
            </div>
    
            <!-- Hidden Overlay (Appears on Hover) -->
            <div class="absolute top-20 left-0 p-4 rounded-xl shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex gap-4">
                <!-- La Casa Icon -->
                <div id="la_casa-button" class="flex justify-center items-center bg-gray-200 w-16 h-16 rounded-full cursor-pointer shadow-md transform transition-all hover:bg-gray-300 hover:scale-110 active:scale-95">
                    <img src="assets/images/la_casa.png" alt="La Casa" class="w-10 h-10 object-cover rounded-full">
                </div>
    
                <!-- Vandetta Icon -->
                <div id="vandetta-button" class="flex justify-center items-center bg-gray-200 w-16 h-16 rounded-full cursor-pointer shadow-md transform transition-all hover:bg-gray-300 hover:scale-110 active:scale-95">
                    <img src="assets/images/vandetta.png" alt="Vandetta" class="w-10 h-10 object-cover rounded-full">
                </div>
    
                <!-- Joker Icon -->
                <div id="joker-button" class="flex justify-center items-center bg-gray-200 w-16 h-16 rounded-full cursor-pointer shadow-md transform transition-all hover:bg-gray-300 hover:scale-110 active:scale-95">
                    <img src="assets/images/joker.png" alt="Joker" class="w-10 h-10 object-cover rounded-full">
                </div>
    
                <!-- Batman Icon -->
                <div id="batman-button" class="flex justify-center items-center bg-gray-200 w-16 h-16 rounded-full cursor-pointer shadow-md transform transition-all hover:bg-gray-300 hover:scale-110 active:scale-95">
                    <img src="assets/images/batman.png" alt="Batman" class="w-10 h-10 object-cover rounded-full">
                </div>
    
                <!-- Hulk Icon -->
                <div id="hulk-button" class="flex justify-center items-center bg-gray-200 w-16 h-16 rounded-full cursor-pointer shadow-md transform transition-all hover:bg-gray-300 hover:scale-110 active:scale-95">
                    <img src="assets/images/hulk.png" alt="Hulk" class="w-10 h-10 object-cover rounded-full">
                </div>
    
                <!-- Disable Filter Button -->
                <div id="disable-filter" class="flex justify-center items-center bg-gray-200 w-16 h-16 rounded-full cursor-pointer shadow-md transform transition-all hover:gray-300 hover:scale-110 active:scale-95">
                    <img src="assets/images/disable.png" alt="Disable Filter" class="w-10 h-10 object-cover rounded-full">
                </div>
            </div>
        </div>
    </div>
    
    <canvas id="canvas-screenshot" style="display: none;"></canvas>

    <button id="screenshot-button" class="fixed top-5 right-5 flex justify-center items-center bg-gray-200 w-16 h-16 rounded-full cursor-pointer shadow-md transform transition-all hover:bg-gray-300 hover:scale-110 active:scale-95">
        <img src="assets/images/screenshot.png" alt="Screenshot" class="w-10 h-10 object-cover rounded-full">
    </button>
    
    <script>
    document.getElementById('la_casa-button').addEventListener('click', () => {
        let model = document.getElementById('model');
        model.setAttribute('src', 'assets/3d/la_casa/scene.gltf');
        model.setAttribute('position', '0 -0.7 -0.3');
        model.setAttribute('scale', '0.7 0.7 0.6');
        model.setAttribute('rotation', '95 0 0');
    });


    document.getElementById('vandetta-button').addEventListener('click', () => {
        let model = document.getElementById('model');
        model.setAttribute('src', 'assets/3d/vandetta/scene.gltf');
        model.setAttribute('position', '0 -0.65 -0.3');
        model.setAttribute('scale', '1 0.8 0.8');
        model.setAttribute('rotation', '0 -90 0');
    });

    document.getElementById('joker-button').addEventListener('click', () => {
        let model = document.getElementById('model');
        model.setAttribute('src', 'assets/3d/joker/scene.gltf');
        model.setAttribute('position', '0 -1.27 -0.3');
        model.setAttribute('scale', '6 6 5');
        model.setAttribute('rotation', '5 0 0');
    });

    document.getElementById('batman-button').addEventListener('click', () => {
        let model = document.getElementById('model');
        model.setAttribute('src', 'assets/3d/batman/scene.gltf');
        model.setAttribute('position', '0 -0.75 -0.3');
        model.setAttribute('scale', '6 6 6');
        model.setAttribute('rotation', '0 0 0');
    });

    document.getElementById('hulk-button').addEventListener('click', () => {
        let model = document.getElementById('model');
        model.setAttribute('src', 'assets/3d/hulk/scene.gltf');
        model.setAttribute('position', '0 -1.1 -0.3');
        model.setAttribute('scale', '6.1 6.1 6');
        model.setAttribute('rotation', '0 0 0');
    });


    document.getElementById('disable-filter').addEventListener('click', () => {
        let model = document.getElementById('model');
        model.setAttribute('src', ' ');
    });



            
    document.querySelector('#screenshot-button').addEventListener('click', function() {

    let canvas = document.querySelector('a-scene').components.screenshot.getCanvas('perspective');

    let video = document.querySelector('video');

    let screenshotCanvas = document.querySelector('#canvas-screenshot');

    let context = screenshotCanvas.getContext('2d');



    // Ensure the canvas has the same dimensions as the video

    screenshotCanvas.width = video.videoWidth;

    screenshotCanvas.height = video.videoHeight;



    // Draw the video frame first with mirroring

    context.save();

    context.scale(-1, 1);

    context.drawImage(video, -video.videoWidth, 0, video.videoWidth, video.videoHeight);

    context.restore();  // Draw the AR scene on top of the video

    context.drawImage(canvas, 0, 0, video.videoWidth, video.videoHeight);



    let link = document.createElement('a');

    link.href = screenshotCanvas.toDataURL('image/png');

    link.download = 'screenshot.png';

    link.click();

    });

    </script>
</body>
</html>
